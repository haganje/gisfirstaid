language: r
dist: trusty
sudo: required

branches:
  only:
    - master

before_install:
  - sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable --yes
  - sudo apt-get --yes --force-yes update -qq
  - sudo apt-get install --yes libproj-dev libgeos-dev libgdal-dev libudunits2-dev

cache:
  packages: yes
  directories:
    - $HOME/bin

r_packages:
 - dplyr
 - Rcpp
 - ggplot2
 - sf
 - igraph
 - stringr

before_script:
  - Rscript -e 'blogdown::install_hugo()'

script:
  - Rscript -e 'blogdown::build_site()'

after_success:
  - travispush.sh
